{"variants":[{"traits":[{"interfaceLanguage":"swift"}],"paths":["\/documentation\/zerosettlekit\/quickstart"]}],"abstract":[{"text":"Build your first payment flow with ZeroSettleKit in 10 minutes.","type":"text"}],"metadata":{"role":"article","modules":[{"name":"ZeroSettleKit"}],"roleHeading":"Article","title":"Quickstart"},"schemaVersion":{"patch":0,"minor":3,"major":0},"kind":"article","identifier":{"url":"doc:\/\/zerosettlekit.ZeroSettleKit\/documentation\/ZeroSettleKit\/Quickstart","interfaceLanguage":"swift"},"hierarchy":{"paths":[["doc:\/\/zerosettlekit.ZeroSettleKit\/documentation\/ZeroSettleKit"]]},"primaryContentSections":[{"kind":"content","content":[{"text":"Overview","anchor":"Overview","level":2,"type":"heading"},{"inlineContent":[{"text":"In this quickstart, you’ll build a simple payment flow that allows users to:","type":"text"}],"type":"paragraph"},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Sign in with their phone number"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"Add funds to their wallet using Apple Pay"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"View their balance"}]}]}],"type":"orderedList"},{"inlineContent":[{"text":"This tutorial assumes you’ve already completed the ","type":"text"},{"type":"reference","identifier":"doc:\/\/zerosettlekit.ZeroSettleKit\/documentation\/ZeroSettleKit\/GettingStarted","isActive":true},{"text":" guide and have ZeroSettleKit configured in your project.","type":"text"}],"type":"paragraph"},{"text":"Step 1: Create the Payment View","anchor":"Step-1-Create-the-Payment-View","level":2,"type":"heading"},{"inlineContent":[{"text":"Create a new SwiftUI view for handling payments:","type":"text"}],"type":"paragraph"},{"syntax":"swift","type":"codeListing","code":["import SwiftUI","import ZeroSettleKit","","struct PaymentView: View {","    @EnvironmentObject var settleManager: ZeroSettleManager","    @State private var fundingAmount: Double = 10.0","    @State private var showingPayment = false","    @State private var errorMessage: String?","","    var body: some View {","        VStack(spacing: 24) {","            \/\/ User Info","            if let user = settleManager.currentUser {","                VStack(spacing: 8) {","                    Text(\"Welcome!\")","                        .font(.title2)","                        .fontWeight(.bold)","","                    Text(user.phoneNumber)","                        .font(.caption)","                        .foregroundColor(.secondary)","","                    if let balance = settleManager.walletBalance {","                        Text(\"Balance: $\\(balance, specifier: \"%.2f\") USDC\")","                            .font(.headline)","                            .foregroundColor(.green)","                    }","                }","                .padding()","                .background(Color(.systemGray6))","                .cornerRadius(12)","            }","","            \/\/ Amount Selector","            VStack(alignment: .leading, spacing: 12) {","                Text(\"Add Funds\")","                    .font(.headline)","","                HStack {","                    Text(\"$\")","                    TextField(\"Amount\", value: $fundingAmount, format: .number)","                        .textFieldStyle(.roundedBorder)","                        .keyboardType(.decimalPad)","                }","            }","","            \/\/ Pay Button","            Button(action: { showingPayment = true }) {","                Text(\"Add $\\(fundingAmount, specifier: \"%.2f\") with Apple Pay\")","                    .frame(maxWidth: .infinity)","                    .padding()","                    .background(Color.black)","                    .foregroundColor(.white)","                    .cornerRadius(12)","            }","            .disabled(fundingAmount <= 0)","","            \/\/ Error Message","            if let error = errorMessage {","                Text(error)","                    .foregroundColor(.red)","                    .font(.caption)","            }","","            Spacer()","        }","        .padding()","        .sheet(isPresented: $showingPayment) {","            ApplePaySheet(","                amount: fundingAmount,","                onSuccess: handlePaymentSuccess,","                onError: handlePaymentError","            )","        }","    }","","    private func handlePaymentSuccess() {","        showingPayment = false","        errorMessage = nil","        \/\/ Refresh balance","        Task {","            await settleManager.refreshBalance()","        }","    }","","    private func handlePaymentError(_ error: Error) {","        showingPayment = false","        errorMessage = error.localizedDescription","    }","}"]},{"text":"Step 2: Create the Apple Pay Sheet","anchor":"Step-2-Create-the-Apple-Pay-Sheet","level":2,"type":"heading"},{"inlineContent":[{"text":"Create a view that handles the Apple Pay flow:","type":"text"}],"type":"paragraph"},{"syntax":"swift","type":"codeListing","code":["import SwiftUI","import ZeroSettleKit","","struct ApplePaySheet: View {","    @EnvironmentObject var settleManager: ZeroSettleManager","    @Environment(\\.dismiss) var dismiss","","    let amount: Double","    let onSuccess: () -> Void","    let onError: (Error) -> Void","","    @State private var isProcessing = false","    @State private var paymentStatus: String = \"Initializing...\"","","    var body: some View {","        VStack(spacing: 24) {","            Text(\"Add Funds\")","                .font(.title)","                .fontWeight(.bold)","","            Text(\"$\\(amount, specifier: \"%.2f\") USDC\")","                .font(.title2)","                .foregroundColor(.green)","","            if isProcessing {","                ProgressView()","                Text(paymentStatus)","                    .font(.caption)","                    .foregroundColor(.secondary)","            }","","            Spacer()","","            Button(\"Cancel\") {","                dismiss()","            }","            .disabled(isProcessing)","        }","        .padding()","        .task {","            await processPayment()","        }","    }","","    private func processPayment() async {","        isProcessing = true","","        do {","            \/\/ Start payment session","            paymentStatus = \"Starting payment...\"","            let session = try await settleManager.startPayment(amount: amount)","","            \/\/ Show Apple Pay (Coinbase handles this)","            paymentStatus = \"Waiting for payment...\"","            try await session.waitForCompletion()","","            \/\/ Payment successful","            paymentStatus = \"Payment complete!\"","            try await Task.sleep(nanoseconds: 1_000_000_000) \/\/ 1 second","            onSuccess()","            dismiss()","","        } catch {","            onError(error)","            dismiss()","        }","    }","}"]},{"text":"Step 3: Create the Authentication Flow","anchor":"Step-3-Create-the-Authentication-Flow","level":2,"type":"heading"},{"inlineContent":[{"text":"Create a view that handles user authentication:","type":"text"}],"type":"paragraph"},{"syntax":"swift","type":"codeListing","code":["import SwiftUI","import ZeroSettleKit","","struct AuthenticationView: View {","    @EnvironmentObject var settleManager: ZeroSettleManager","    @State private var phoneNumber = \"\"","    @State private var isAuthenticating = false","    @State private var errorMessage: String?","","    var body: some View {","        VStack(spacing: 24) {","            Text(\"Welcome to ZeroSettle\")","                .font(.title)","                .fontWeight(.bold)","","            Text(\"Sign in to get started\")","                .font(.subheadline)","                .foregroundColor(.secondary)","","            VStack(spacing: 16) {","                TextField(\"Phone Number\", text: $phoneNumber)","                    .textFieldStyle(.roundedBorder)","                    .keyboardType(.phonePad)","                    .disabled(isAuthenticating)","","                Button(action: authenticate) {","                    if isAuthenticating {","                        ProgressView()","                            .progressViewStyle(.circular)","                    } else {","                        Text(\"Continue\")","                    }","                }","                .frame(maxWidth: .infinity)","                .padding()","                .background(phoneNumber.isEmpty ? Color.gray : Color.blue)","                .foregroundColor(.white)","                .cornerRadius(12)","                .disabled(phoneNumber.isEmpty || isAuthenticating)","            }","","            if let error = errorMessage {","                Text(error)","                    .foregroundColor(.red)","                    .font(.caption)","            }","","            Spacer()","        }","        .padding()","    }","","    private func authenticate() {","        isAuthenticating = true","        errorMessage = nil","","        Task {","            do {","                try await settleManager.authenticate(phoneNumber: phoneNumber)","                \/\/ Authentication successful - UI will update automatically","            } catch {","                errorMessage = error.localizedDescription","                isAuthenticating = false","            }","        }","    }","}"]},{"text":"Step 4: Wire It All Together","anchor":"Step-4-Wire-It-All-Together","level":2,"type":"heading"},{"inlineContent":[{"text":"Update your ","type":"text"},{"type":"codeVoice","code":"ContentView"},{"text":" to show the appropriate view based on authentication state:","type":"text"}],"type":"paragraph"},{"syntax":"swift","type":"codeListing","code":["import SwiftUI","import ZeroSettleKit","","struct ContentView: View {","    @EnvironmentObject var settleManager: ZeroSettleManager","","    var body: some View {","        Group {","            if settleManager.isAuthenticated {","                PaymentView()","            } else {","                AuthenticationView()","            }","        }","    }","}"]},{"text":"Step 5: Test Your Implementation","anchor":"Step-5-Test-Your-Implementation","level":2,"type":"heading"},{"inlineContent":[{"text":"Build and run your app:","type":"text"}],"type":"paragraph"},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"Launch the app"}]},{"type":"text","text":" - You should see the authentication screen"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"Enter your phone number"}]},{"type":"text","text":" - Use your real phone number in sandbox mode"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"Complete authentication"}]},{"type":"text","text":" - You’ll receive an OTP code via SMS"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"View your wallet"}]},{"type":"text","text":" - After authentication, you’ll see your wallet balance"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"Add funds"}]},{"type":"text","text":" - Tap the “Add with Apple Pay” button"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"Complete payment"}]},{"type":"text","text":" - Follow the Coinbase Commerce flow to add funds"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"See updated balance"}]},{"type":"text","text":" - Your balance should update after payment completes"}]}]}],"type":"orderedList"},{"text":"What’s Happening Under the Hood","anchor":"Whats-Happening-Under-the-Hood","level":2,"type":"heading"},{"inlineContent":[{"text":"When you run this flow, ZeroSettleKit:","type":"text"}],"type":"paragraph"},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"Authenticates via Privy"}]},{"type":"text","text":" - Creates or retrieves an embedded Solana wallet"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"Generates a Coinbase Commerce session"}]},{"type":"text","text":" - Creates a payment URL"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"Opens Coinbase payment flow"}]},{"type":"text","text":" - User completes payment via Apple Pay"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"Monitors payment status"}]},{"type":"text","text":" - Polls Coinbase API for payment completion"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"Credits the wallet"}]},{"type":"text","text":" - USDC appears in the user’s Solana wallet"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"Updates balance"}]},{"type":"text","text":" - Refreshes the displayed balance"}]}]}],"type":"orderedList"},{"inlineContent":[{"text":"All of this happens automatically - you just call the APIs!","type":"text"}],"type":"paragraph"},{"text":"Next Steps","anchor":"Next-Steps","level":2,"type":"heading"},{"inlineContent":[{"text":"Now that you have a basic payment flow working, you can:","type":"text"}],"type":"paragraph"},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"Add payout tables"}]},{"type":"text","text":" - "},{"type":"text","text":"doc:PayoutTables"},{"type":"text","text":" - Automatically split payments"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"Customize the UI"}]},{"text":" - Build your own payment components","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"text":"Add withdrawal","type":"text"}]},{"type":"text","text":" - Let users withdraw USDC to external wallets"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"strong","inlineContent":[{"type":"text","text":"Multi-chain support"}]},{"type":"text","text":" - "},{"type":"text","text":"doc:MultiChainSupport"},{"type":"text","text":" - Support other blockchains"}]}]}],"type":"unorderedList"},{"text":"Common Issues","anchor":"Common-Issues","level":2,"type":"heading"},{"text":"“Phone number authentication failed”","type":"heading","anchor":"Phone-number-authentication-failed","level":3},{"type":"paragraph","inlineContent":[{"text":"Make sure your Privy account is configured for SMS authentication and you’re using a valid phone number format.","type":"text"}]},{"text":"“Payment session timeout”","type":"heading","anchor":"Payment-session-timeout","level":3},{"type":"paragraph","inlineContent":[{"text":"This can happen if the user doesn’t complete the Coinbase Commerce flow. Implement timeout handling:","type":"text"}]},{"syntax":"swift","type":"codeListing","code":["try await withThrowingTaskGroup(of: Void.self) { group in","    group.addTask {","        try await session.waitForCompletion()","    }","    group.addTask {","        try await Task.sleep(nanoseconds: 300_000_000_000) \/\/ 5 minutes","        throw PaymentError.timeout","    }","    try await group.next()","    group.cancelAll()","}"]},{"text":"“Balance not updating”","type":"heading","level":3,"anchor":"Balance-not-updating"},{"type":"paragraph","inlineContent":[{"text":"Make sure you’re calling ","type":"text"},{"type":"codeVoice","code":"await settleManager.refreshBalance()"},{"type":"text","text":" after successful payments."}]}]}],"sections":[],"seeAlsoSections":[{"anchor":"Related-Documentation","title":"Related Documentation","identifiers":["doc:\/\/zerosettlekit.ZeroSettleKit\/documentation\/ZeroSettleKit\/Architecture","doc:\/\/zerosettlekit.ZeroSettleKit\/documentation\/ZeroSettleKit\/ZeroSettleManager","doc:\/\/zerosettlekit.ZeroSettleKit\/documentation\/ZeroSettleKit\/PaymentProcessor"]},{"generated":true,"anchor":"Essentials","title":"Essentials","identifiers":["doc:\/\/zerosettlekit.ZeroSettleKit\/documentation\/ZeroSettleKit\/GettingStarted"]}],"references":{"doc://zerosettlekit.ZeroSettleKit/documentation/ZeroSettleKit/GettingStarted":{"abstract":[{"text":"Install and configure ZeroSettleKit in your iOS app.","type":"text"}],"url":"\/documentation\/zerosettlekit\/gettingstarted","kind":"article","title":"Getting Started","identifier":"doc:\/\/zerosettlekit.ZeroSettleKit\/documentation\/ZeroSettleKit\/GettingStarted","role":"article","type":"topic"},"doc://zerosettlekit.ZeroSettleKit/documentation/ZeroSettleKit":{"title":"ZeroSettleKit","url":"\/documentation\/zerosettlekit","identifier":"doc:\/\/zerosettlekit.ZeroSettleKit\/documentation\/ZeroSettleKit","type":"topic","kind":"symbol","abstract":[{"type":"text","text":"Seamless stablecoin settlements for mobile games and apps."}],"role":"collection"},"doc://zerosettlekit.ZeroSettleKit/documentation/ZeroSettleKit/PaymentProcessor":{"abstract":[{"type":"text","text":"Protocol for payment processors that handle fiat-to-crypto onramp"}],"url":"\/documentation\/zerosettlekit\/paymentprocessor","fragments":[{"kind":"keyword","text":"protocol"},{"kind":"text","text":" "},{"kind":"identifier","text":"PaymentProcessor"}],"kind":"symbol","title":"PaymentProcessor","identifier":"doc:\/\/zerosettlekit.ZeroSettleKit\/documentation\/ZeroSettleKit\/PaymentProcessor","navigatorTitle":[{"kind":"identifier","text":"PaymentProcessor"}],"role":"symbol","type":"topic"},"doc://zerosettlekit.ZeroSettleKit/documentation/ZeroSettleKit/ZeroSettleManager":{"abstract":[{"type":"text","text":"Main manager that coordinates authentication, funding, and wallet operations"}],"url":"\/documentation\/zerosettlekit\/zerosettlemanager","fragments":[{"kind":"keyword","text":"class"},{"kind":"text","text":" "},{"kind":"identifier","text":"ZeroSettleManager"}],"kind":"symbol","title":"ZeroSettleManager","identifier":"doc:\/\/zerosettlekit.ZeroSettleKit\/documentation\/ZeroSettleKit\/ZeroSettleManager","navigatorTitle":[{"kind":"identifier","text":"ZeroSettleManager"}],"role":"symbol","type":"topic"},"doc://zerosettlekit.ZeroSettleKit/documentation/ZeroSettleKit/Architecture":{"abstract":[{"type":"text","text":"Understand how ZeroSettleKit is designed and structured."}],"url":"\/documentation\/zerosettlekit\/architecture","kind":"article","title":"Architecture","identifier":"doc:\/\/zerosettlekit.ZeroSettleKit\/documentation\/ZeroSettleKit\/Architecture","role":"article","type":"topic"}}}